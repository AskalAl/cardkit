!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("deep-extend"),require("rvg.js"),require("prop-types"),require("object-assign"),require("svg2png"),require("btoa")):"function"==typeof define&&define.amd?define("CardKitServer",["react","deep-extend","rvg.js","prop-types","object-assign","svg2png","btoa"],t):"object"==typeof exports?exports.CardKitServer=t(require("react"),require("deep-extend"),require("rvg.js"),require("prop-types"),require("object-assign"),require("svg2png"),require("btoa")):e.CardKitServer=t(e.react,e["deep-extend"],e["rvg.js"],e["prop-types"],e["object-assign"],e.svg2png,e.btoa)}(window,function(e,t,r,n,o,i,a){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=18)}([function(t,r){t.exports=e},function(e,t,r){"use strict";e.exports={slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},svgToBase64:function(e,t){return t(unescape(encodeURIComponent(e)))},capitaliseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}},function(e,r){e.exports=t},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=r(2),a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("A configuration object was not provided");if(!this._isValidConfiguration(t))throw new Error("Invalid configuration object provided");this.configuration=t,this._configureOptions(r),this.renderers=[]}return o(e,[{key:"_configureOptions",value:function(e){if(e){if(e.templates){if(!this._isValidTemplatesConfiguration(e.templates))throw new Error("Invalid templates configuration object provided");this.templates=e.templates}else this.templates=null;if(e.themes){if(!this._isValidThemesConfiguration(e.themes))throw new Error("Invalid themes configuration object provided");this.themes=e.themes}else this.themes=null;if(e.layouts){if(!this._isValidLayoutsConfiguration(e.layouts))throw new Error("Invalid layouts configuration object provided");this.layouts=e.layouts}else this.layouts=null}}},{key:"_isValidConfiguration",value:function(e){return"object"===(void 0===e?"undefined":n(e))&&void 0!==e.card&&"object"===n(e.card)&&void 0!==e.card.height&&void 0!==e.card.width}},{key:"_isValidTemplatesConfiguration",value:function(e){return"object"===(void 0===e?"undefined":n(e))}},{key:"_isValidThemesConfiguration",value:function(e){return"object"===(void 0===e?"undefined":n(e))}},{key:"_isValidLayoutsConfiguration",value:function(e){return"object"===(void 0===e?"undefined":n(e))}},{key:"_isValidRenderer",value:function(e){return e.cardkit===this}},{key:"computeConfiguration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object.assign({},this.configuration);return e&&(e.template&&void 0!==this.templates[e.template]&&(t=i(t,this.templates[e.template])),e.theme&&void 0!==this.themes[e.theme]&&(t=i(t,this.themes[e.theme])),e.layout&&void 0!==this.layouts[e.layout]&&(t=i(t,this.layouts[e.layout]))),t}},{key:"updateConfiguration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{layouts:null,templates:null,themes:null},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(this.configuration=e,this._configureOptions(t),r)&&this.getRenderers().forEach(function(e){switch(e.constructor.name){case"CardKitDOM":e.rerender()}})}},{key:"getRenderers",value:function(){return this.renderers}},{key:"addRenderer",value:function(e){if(!this._isValidRenderer(e))throw new Error("Invalid renderer object provided");this.renderers.push(e)}}]),e}();e.exports=a,"undefined"!=typeof window&&(window.CardKit=a)},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=r(3),i=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("An instance of CardKit was not provided");if(!(t instanceof o)&&"CardKit"!==t.constructor.name)throw new Error("Invalid CardKit object provided");this.cardkit=t,this.cardkit.addRenderer(this)}return n(e,[{key:"rerender",value:function(){}},{key:"computeConfiguration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.cardkit.computeConfiguration(e)}}]),e}();e.exports=i},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=r(0),a=r(6),u=r(5),l=u.SVG,s=u.Text,c=u.Rectangle,f=u.Circle,p=u.Ellipse,d=u.Line,h=u.Image,y=u.Path,g=u.LinearGradient,m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),o(t,[{key:"calculateYPosition",value:function(e,t){var r=this.getLayerValue(e,t,"y");if("object"===(void 0===r?"undefined":n(r))&&"undefined"!==r.attach){var o=e[t.y.attach],i=0;switch(o.type){case"text":var a=o.text.split("\n");""!==o.text&&(i=a.length*(this.getLayerValue(e,o,"lineHeight")||this.getLayerValue(e,o,"fontSize")));break;default:void 0!==this.getLayerValue(e,o,"height")&&(i=this.getLayerValue(e,o,"height"))}var u=t.y.offset||0;r=i+this.calculateYPosition(e,o)+u}return r}},{key:"getLayerValue",value:function(e,t,r){return"function"==typeof t[r]?t[r](e,this.refs.svg):t[r]}},{key:"computeGradients",value:function(e){var t=this,r=[],n=void 0,o=void 0;return Object.keys(e).forEach(function(a){n=e[a],t.getLayerValue(e,n,"gradient")&&(o=t.getLayerValue(e,n,"gradient"),r.push(i.createElement(g,{key:a,name:a,x1:0,x2:0,y1:0,y2:1,stops:o})))}),r}},{key:"computeLayers",value:function(e){var t=this,r=[],n=void 0;return Object.keys(e).forEach(function(o){if(n=e[o],!0!==t.getLayerValue(e,n,"hidden")){var a={};switch(Object.keys(n).forEach(function(r){a[r]=t.getLayerValue(e,n,r)}),t.getLayerValue(e,n,"gradient")&&(a.fill="url(#"+o+")"),n.type){case"text":var u=a.text.split("\n");r.push(i.createElement(s,{x:a.x,y:t.calculateYPosition(e,a),fontFamily:a.fontFamily,fontSize:a.fontSize,fontWeight:a.fontWeight,lineHeight:a.lineHeight,textAnchor:a.textAnchor,fill:a.fill,draggable:a.draggable,transform:a.transform,opacity:a.opacity,smartQuotes:a.smartQuotes,key:o},u));break;case"image":r.push(i.createElement(h,{x:a.x,y:t.calculateYPosition(e,a),href:a.src,height:a.height,width:a.width,draggable:a.draggable,transform:a.transform,opacity:a.opacity,key:o}));break;case"rectangle":r.push(i.createElement(c,{x:a.x,y:t.calculateYPosition(e,a),fill:a.fill,height:a.height,width:a.width,draggable:a.draggable,transform:a.transform,key:o}));break;case"circle":r.push(i.createElement(f,{x:a.x,y:t.calculateYPosition(e,a),fill:a.fill,radius:a.radius,draggable:a.draggable,transform:a.transform,key:o}));break;case"ellipse":r.push(i.createElement(p,{x:a.x,y:t.calculateYPosition(e,a),fill:a.fill,radiusX:a.radiusX,radiusY:a.radiusY,draggable:a.draggable,transform:a.transform,key:o}));break;case"line":r.push(i.createElement(d,{x:[a.x1,a.x2],y:[a.y1,a.y2],stroke:a.stroke||a.fill,draggable:a.draggable,transform:a.transform,key:o}));break;case"path":r.push(i.createElement(y,{d:a.path||a.d,fill:a.fill,draggable:a.draggable,transform:a.transform,key:o}))}}}),r}},{key:"computeFonts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t,r){var o=e[t],a="svg";return"object"===n(e[t])&&(o=e[t].src,a=e[t].format||"svg"),i.createElement("style",{key:r},"@font-face {\n              font-family: '"+t+"';\n              src: url(\""+o+'") format("'+a+'");\n              font-weight: normal;\n              font-style: normal;\n          }')})}},{key:"render",value:function(){var e=this.props.configuration,t=e.card,r=e.fonts,n=e.layers,o=this.computeLayers(n),a=this.computeGradients(n),u=this.computeFonts(r);return i.createElement("div",{className:"card",ref:"svg",style:{maxWidth:t.width,maxHeight:t.height}},i.createElement(l,{height:t.height,width:t.width,fill:t.fill},i.createElement("defs",null,u,a),o))}}]),t}();m.propTypes={configuration:a.shape({card:a.object,fonts:a.object,layers:a.object})},e.exports=m},function(e,t,r){"use strict";e.exports=function(e){var t={};return function(r){return t.hasOwnProperty(r)||(t[r]=e.call(this,r)),t[r]}}},function(e,t,r){"use strict";var n=/([A-Z])/g;e.exports=function(e){return e.replace(n,"-$1").toLowerCase()}},function(e,t,r){"use strict";var n=r(9),o=/^ms-/;e.exports=function(e){return n(e).replace(o,"-ms-")}},function(e,t,r){"use strict";e.exports={}},function(e,t,r){"use strict";function n(e){return function(){return e}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t){e.exports=o},function(e,t,r){"use strict";var n=r(13),o=r(0),i=r(12),a=r(11),u=r(10),l=r(8);function s(e){for(var t=arguments.length-1,r="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);throw(t=Error(r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",t.framesToPop=1,t}var c={children:!0,dangerouslySetInnerHTML:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,suppressHydrationWarning:!0,style:!0};function f(e,t){return(e&t)===t}var p={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=p,r=e.Properties||{},n=e.DOMAttributeNamespaces||{},o=e.DOMAttributeNames||{};for(var i in e=e.DOMMutationMethods||{},r){d.hasOwnProperty(i)&&s("48",i);var a=i.toLowerCase(),u=r[i];1>=(a={attributeName:a,attributeNamespace:null,propertyName:i,mutationMethod:null,mustUseProperty:f(u,t.MUST_USE_PROPERTY),hasBooleanValue:f(u,t.HAS_BOOLEAN_VALUE),hasNumericValue:f(u,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:f(u,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:f(u,t.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:f(u,t.HAS_STRING_BOOLEAN_VALUE)}).hasBooleanValue+a.hasNumericValue+a.hasOverloadedBooleanValue||s("50",i),o.hasOwnProperty(i)&&(a.attributeName=o[i]),n.hasOwnProperty(i)&&(a.attributeNamespace=n[i]),e.hasOwnProperty(i)&&(a.mutationMethod=e[i]),d[i]=a}}},d={};function h(e){return d.hasOwnProperty(e)?d[e]:null}function y(e){if(c.hasOwnProperty(e))return!0;var t=h(e);return t?t.hasBooleanValue||t.hasStringBooleanValue||t.hasOverloadedBooleanValue:"data-"===(e=e.toLowerCase().slice(0,5))||"aria-"===e}var g=p,m=g.MUST_USE_PROPERTY,v=g.HAS_BOOLEAN_VALUE,b=g.HAS_NUMERIC_VALUE,w=g.HAS_POSITIVE_NUMERIC_VALUE,x=g.HAS_OVERLOADED_BOOLEAN_VALUE,k=g.HAS_STRING_BOOLEAN_VALUE,O={Properties:{allowFullScreen:v,async:v,autoFocus:v,autoPlay:v,capture:x,checked:m|v,cols:w,contentEditable:k,controls:v,default:v,defer:v,disabled:v,download:x,draggable:k,formNoValidate:v,hidden:v,loop:v,multiple:m|v,muted:m|v,noValidate:v,open:v,playsInline:v,readOnly:v,required:v,reversed:v,rows:w,rowSpan:b,scoped:v,seamless:v,selected:m|v,size:w,start:b,span:w,spellCheck:k,style:0,tabIndex:0,itemScope:v,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:k},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}},E=g.HAS_STRING_BOOLEAN_VALUE,S="http://www.w3.org/1999/xlink",_="http://www.w3.org/XML/1998/namespace",C={Properties:{autoReverse:E,externalResourcesRequired:E,preserveAlpha:E},DOMAttributeNames:{autoReverse:"autoReverse",externalResourcesRequired:"externalResourcesRequired",preserveAlpha:"preserveAlpha"},DOMAttributeNamespaces:{xlinkActuate:S,xlinkArcrole:S,xlinkHref:S,xlinkRole:S,xlinkShow:S,xlinkTitle:S,xlinkType:S,xmlBase:_,xmlLang:_,xmlSpace:_}},A=/[\-\:]([a-z])/g;function V(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space".split(" ").forEach(function(e){var t=e.replace(A,V);C.Properties[t]=0,C.DOMAttributeNames[t]=e}),g.injectDOMPropertyConfig(O),g.injectDOMPropertyConfig(C);var L="function"==typeof Symbol&&Symbol.for?Symbol.for("react.fragment"):60107,j=/["'&<>]/;function N(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=j.exec(e);if(t){var r,n="",o=0;for(r=t.index;r<e.length;r++){switch(e.charCodeAt(r)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==r&&(n+=e.substring(o,r)),o=r+1,n+=t}e=o!==r?n+e.substring(o,r):n}return e}var P=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F={},M={};function T(e){return!!M.hasOwnProperty(e)||!F.hasOwnProperty(e)&&(P.test(e)?M[e]=!0:(F[e]=!0,!1))}function R(e,t){var r=h(e);if(r){if(null==t||r.hasBooleanValue&&!t||r.hasNumericValue&&isNaN(t)||r.hasPositiveNumericValue&&1>t||r.hasOverloadedBooleanValue&&!1===t)return"";var n=r.attributeName;if(r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===t)return n+'=""';if("boolean"!=typeof t||y(e))return n+'="'+N(t)+'"'}else if(function(e,t){if(c.hasOwnProperty(e)||2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))return!1;if(null===t)return!0;switch(typeof t){case"boolean":return y(e);case"undefined":case"number":case"string":case"object":return!0;default:return!1}}(e,t))return null==t?"":e+'="'+N(t)+'"';return null}var I={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function D(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var U={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},H=n({menuitem:!0},U),B={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},q=["Webkit","ms","Moz","O"];Object.keys(B).forEach(function(e){q.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),B[t]=B[e]})});var z=o.Children.toArray,W=i.thatReturns(""),Y={listing:!0,pre:!0,textarea:!0};function G(e){return"string"==typeof e?e:"function"==typeof e?e.displayName||e.name:null}var K=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Z={},$=l(function(e){return u(e)});function X(e,t){if(e=e.contextTypes){var r,n={};for(r in e)n[r]=t[r];t=n}else t=a;return t}var Q={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function J(e,t){void 0===e&&s("152",G(t)||"Component")}var ee=function(){function e(t,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");o.isValidElement(t)?t.type!==L?t=[t]:(t=t.props.children,t=o.isValidElement(t)?[t]:z(t)):t=z(t),this.stack=[{domNamespace:I.html,children:t,childIndex:0,context:a,footer:""}],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=r}return e.prototype.read=function(e){if(this.exhausted)return null;for(var t="";t.length<e;){if(0===this.stack.length){this.exhausted=!0;break}var r=this.stack[this.stack.length-1];if(r.childIndex>=r.children.length){var n=r.footer;t+=n,""!==n&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===r.tag&&(this.currentSelectValue=null)}else n=r.children[r.childIndex++],t+=this.render(n,r.context,r.domNamespace)}return t},e.prototype.render=function(e,t,r){return"string"==typeof e||"number"==typeof e?""===(r=""+e)?"":this.makeStaticMarkup?N(r):this.previousWasTextNode?"\x3c!-- --\x3e"+N(r):(this.previousWasTextNode=!0,N(r)):(t=function(e,t){for(;o.isValidElement(e);){var r=e,i=r.type;if("function"!=typeof i)break;e=X(i,t);var a=[],u=!1,l={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===a)return null},enqueueReplaceState:function(e,t){u=!0,a=[t]},enqueueSetState:function(e,t){if(null===a)return null;a.push(t)}};if(i.prototype&&i.prototype.isReactComponent)var c=new i(r.props,e,l);else if(null==(c=i(r.props,e,l))||null==c.render){J(e=c,i);continue}if(c.props=r.props,c.context=e,c.updater=l,void 0===(l=c.state)&&(c.state=l=null),c.componentWillMount)if(c.componentWillMount(),a.length){l=a;var f=u;if(a=null,u=!1,f&&1===l.length)c.state=l[0];else{var p=f?l[0]:c.state,d=!0;for(f=f?1:0;f<l.length;f++){var h=l[f];(h="function"==typeof h?h.call(c,p,r.props,e):h)&&(d?(d=!1,p=n({},p,h)):n(p,h))}c.state=p}}else a=null;if(J(e=c.render(),i),"function"==typeof c.getChildContext&&"object"==typeof(r=i.childContextTypes)){var y=c.getChildContext();for(var g in y)g in r||s("108",G(i)||"Unknown",g)}y&&(t=n({},t,y))}return{child:e,context:t}}(e,t),e=t.child,t=t.context,null===e||!1===e?"":o.isValidElement(e)?e.type===L?(e=z(e.props.children),this.stack.push({domNamespace:r,children:e,childIndex:0,context:t,footer:""}),""):this.renderDOM(e,t,r):(e=z(e),this.stack.push({domNamespace:r,children:e,childIndex:0,context:t,footer:""}),""))},e.prototype.renderDOM=function(e,t,r){var i=e.type.toLowerCase();r===I.html&&D(i),Z.hasOwnProperty(i)||(K.test(i)||s("65",i),Z[i]=!0);var a=e.props;if("input"===i)a=n({type:void 0},a,{defaultChecked:void 0,defaultValue:void 0,value:null!=a.value?a.value:a.defaultValue,checked:null!=a.checked?a.checked:a.defaultChecked});else if("textarea"===i){var u=a.value;if(null==u){u=a.defaultValue;var l=a.children;null!=l&&(null!=u&&s("92"),Array.isArray(l)&&(1>=l.length||s("93"),l=l[0]),u=""+l),null==u&&(u="")}a=n({},a,{value:void 0,children:""+u})}else if("select"===i)this.currentSelectValue=null!=a.value?a.value:a.defaultValue,a=n({},a,{value:void 0});else if("option"===i){l=this.currentSelectValue;var c=function(e){var t="";return o.Children.forEach(e,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(t+=e)}),t}(a.children);if(null!=l){var f=null!=a.value?a.value+"":c;if(u=!1,Array.isArray(l)){for(var p=0;p<l.length;p++)if(""+l[p]===f){u=!0;break}}else u=""+l===f;a=n({selected:void 0,children:void 0},a,{selected:u,children:c})}}for(v in(u=a)&&(H[i]&&(null!=u.children||null!=u.dangerouslySetInnerHTML)&&s("137",i,W()),null!=u.dangerouslySetInnerHTML&&(null!=u.children&&s("60"),"object"==typeof u.dangerouslySetInnerHTML&&"__html"in u.dangerouslySetInnerHTML||s("61")),null!=u.style&&"object"!=typeof u.style&&s("62",W())),u=a,l=this.makeStaticMarkup,c=1===this.stack.length,f="<"+e.type,u)if(u.hasOwnProperty(v)){var d=u[v];if(null!=d){if("style"===v){p=void 0;var h="",y="";for(p in d)if(d.hasOwnProperty(p)){var g=0===p.indexOf("--"),m=d[p];null!=m&&(h+=y+$(p)+":",y=p,h+=g=null==m||"boolean"==typeof m||""===m?"":g||"number"!=typeof m||0===m||B.hasOwnProperty(y)&&B[y]?(""+m).trim():m+"px",y=";")}d=h||null}p=null;e:if(g=i,m=u,-1===g.indexOf("-"))g="string"==typeof m.is;else switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":g=!1;break e;default:g=!0}g?Q.hasOwnProperty(v)||(p=T(p=v)&&null!=d?p+'="'+N(d)+'"':""):p=R(v,d),p&&(f+=" "+p)}}l||c&&(f+=' data-reactroot=""');var v=f;u="",U.hasOwnProperty(i)?v+="/>":(v+=">",u="</"+e.type+">");e:{if(null!=(l=a.dangerouslySetInnerHTML)){if(null!=l.__html){l=l.__html;break e}}else if("string"==typeof(l=a.children)||"number"==typeof l){l=N(l);break e}l=null}return null!=l?(a=[],Y[i]&&"\n"===l.charAt(0)&&(v+="\n"),v+=l):a=z(a.children),e=e.type,r=null==r||"http://www.w3.org/1999/xhtml"===r?D(e):"http://www.w3.org/2000/svg"===r&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":r,this.stack.push({domNamespace:r,tag:i,children:a,childIndex:0,context:t,footer:u}),this.previousWasTextNode=!1,v},e}(),te={renderToString:function(e){return new ee(e,!1).read(1/0)},renderToStaticMarkup:function(e){return new ee(e,!0).read(1/0)},renderToNodeStream:function(){s("207")},renderToStaticNodeStream:function(){s("208")},version:"16.2.0"},re=Object.freeze({default:te}),ne=re&&te||re;e.exports=ne.default?ne.default:ne},function(e,t,r){"use strict";e.exports=r(14)},function(e,t){e.exports=i},function(e,t){e.exports=a},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=r(17),i=r(16),a=r(0),u=r(15),l=r(7),s=r(4),c=r(1),f=function(e){function t(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"undefined"!=typeof document)throw new Error("CardKitServer can only be used in a server environment");return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s),n(t,[{key:"renderToString",value:function(){return u.renderToString(a.createFactory(l)({configuration:this.computeConfiguration()}),{})}},{key:"renderToImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=this.renderToString(),r=c.svgToBase64(t,o);return i(r,{width:this.computeConfiguration().card.width*e,height:this.computeConfiguration().card.height*e}).then(function(e){return e.toString("base64")})}}]),t}();e.exports=f}])});